<html><head><base href="https://www.example.com"><title>نظام محاسبي متكامل - عامر جروب للإلكترونيات</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
    :root {
        --primary: #2c3e50;
        --secondary: #34495e;
        --accent: #3498db;
        --success: #27ae60;
        --background: #ecf0f1;
    }
    
    body {
        font-family: 'Cairo', sans-serif;
        direction: rtl;
        background: var(--background);
        margin: 0;
        padding: 0;
        min-height: 100vh;
        background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    }
    
    .container {
        max-width: 1400px;
        margin: 20px auto;
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    h1 {
        color: var(--primary);
        text-align: center;
        font-size: 2.8em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    
    .system-subtitle {
        color: var(--secondary);
        text-align: center;
        font-size: 1.5em;
        margin-bottom: 30px;
        font-weight: 600;
    }
    
    .search-container {
        margin-bottom: 20px;
        display: flex;
        gap: 10px;
        align-items: center;
    }
    
    .search-input {
        flex: 1;
        padding: 12px;
        border: 2px solid var(--primary);
        border-radius: 8px;
        font-size: 1.1em;
        font-family: 'Cairo', sans-serif;
    }
    
    .search-results {
        margin-top: 20px;
        display: none;
    }
    
    .search-results.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    
    .nav-menu {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
    }
    
    .nav-button {
        background: var(--primary);
        color: white;
        padding: 15px 25px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1.1em;
        font-weight: 600;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .nav-button:hover {
        background: var(--accent);
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    
    .section {
        display: none;
        padding: 25px;
        border: 1px solid #e1e8ed;
        border-radius: 10px;
        margin-top: 20px;
        background: white;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    
    .section.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 20px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }
    
    th, td {
        border: 1px solid #e1e8ed;
        padding: 12px 15px;
        text-align: right;
    }
    
    th {
        background: var(--primary);
        color: white;
        font-weight: 600;
    }
    
    td {
        background: white;
    }
    
    tr:hover td {
        background: #f8f9fa;
    }
    
    input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-family: 'Cairo', sans-serif;
        transition: all 0.3s ease;
    }
    
    input:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        outline: none;
    }
    
    .add-button {
        background: var(--success);
        color: white;
        padding: 12px 25px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        margin-top: 20px;
        font-size: 1.1em;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .add-button:hover {
        background: #219a52;
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    
    /* Additional styles for new sections */
    .ledger-table, .trial-balance-table, .income-table, .balance-sheet-table, .payroll-table, .tax-table {
        margin-bottom: 20px;
    }
    
    .calculation-row td {
        background-color: #f8f9fa;
        font-weight: bold;
    }
    
    .total-row td {
        background-color: var(--primary);
        color: white;
        font-weight: bold;
    }
    
    /* Authentication styles */
    .auth-container {
        max-width: 400px;
        margin: 50px auto;
        padding: 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        text-align: center;
    }
    
    .logo-container {
        margin-bottom: 20px;
    }
    
    .logo-container img {
        max-width: 200px;
        height: auto;
        display: block;
        margin: 0 auto;
    }
    
    .site-header {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .site-header img {
        width: 100px;
        height: auto;
        object-fit: contain;
    }
    
    /* Auth form styles */
    .auth-form {
        display: flex;
        flex-direction: column;
        gap: 15px;
        padding: 20px;
    }
    
    .auth-form input {
        padding: 12px;
        border: 2px solid var(--primary);
        border-radius: 8px;
        font-size: 1.1em;
    }
    
    .permission-list {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin: 15px 0;
        text-align: right;
    }
    
    .permission-item {
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .login-error {
        color: #e74c3c;
        display: none;
        margin: 10px 0;
        font-weight: bold;
        padding: 8px;
        border-radius: 4px;
        background: rgba(231, 76, 60, 0.1);
        border: 1px solid #e74c3c;
    }
    
    .logout-button {
        position: fixed;
        top: 20px;
        left: 20px;
        background: var(--primary);
        color: white;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        border: none;
    }
    
    /* Search results styles */
    .search-details-table {
        width: 100%;
        margin: 10px 0;
        border-collapse: collapse;
    }
    
    .search-details-table th {
        background: var(--secondary);
        color: white;
        padding: 8px;
        font-size: 0.9em;
    }
    
    .search-details-table td {
        padding: 4px;
    }
    
    .search-result-input {
        width: 100%;
        padding: 6px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 0.9em;
    }
    
    .search-result-input:focus {
        border-color: var(--accent);
        outline: none;
        box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
    }
    </style></head><body>
    
    <div id="authSection" class="auth-container">
        <div class="logo-container">
            <img src="دريك.jpg" alt="شعار ديراك - شعار ذهبي مع نص عربي وإنجليزي" width="200" height="100">
        </div>
        <div id="loginForm" class="auth-form">
            <h2>تسجيل الدخول</h2>
            <input type="text" id="loginUsername" placeholder="اسم المستخدم">
            <input type="password" id="loginPassword" placeholder="كلمة المرور">
            <button class="nav-button" onclick="login()">دخول</button>
            <p class="login-error" id="loginError">خطأ في اسم المستخدم أو كلمة المرور</p>
            <button class="add-button" onclick="showRegisterForm()">تسجيل مستخدم جديد</button>
        </div>
        
        <div id="registerForm" class="auth-form" style="display:none;">
            <h2>تسجيل مستخدم جديد</h2>
            <input type="text" id="regUsername" placeholder="اسم المستخدم">
            <input type="password" id="regPassword" placeholder="كلمة المرور">
            <div class="permission-list">
                <div class="permission-item">
                    <input type="checkbox" id="perm_accounts"> تكويد الحسابات
                </div>
                <div class="permission-item">
                    <input type="checkbox" id="perm_journal"> دفتر اليومية
                </div>
                <div class="permission-item">
                    <input type="checkbox" id="perm_ledger"> دفاتر الأستاذ
                </div>
                <div class="permission-item">
                    <input type="checkbox" id="perm_trial"> ميزان المراجعة
                </div>
                <div class="permission-item">
                    <input type="checkbox" id="perm_income"> قائمة الدخل
                </div>
                <div class="permission-item">
                    <input type="checkbox" id="perm_balance"> الميزانية
                </div>
                <div class="permission-item">
                    <input type="checkbox" id="perm_payroll"> الأجور
                </div>
                <div class="permission-item">
                    <input type="checkbox" id="perm_tax"> الضرائب
                </div>
            </div>
            <button class="nav-button" onclick="register()">تسجيل</button>
            <button class="add-button" onclick="showLoginForm()">العودة للدخول</button>
        </div>
    </div>
    
    <div class="container">
        <div class="site-header">
            <img src="دريك.jpg" alt="شعار ديراك - شعار ذهبي مع نص عربي وإنجليزي" width="100" height="50">
            <div>
                <h1>عامر جروب للإلكترونيات</h1>
                <h2 class="system-subtitle">النظام المحاسبي المتكامل</h2>
            </div>
        </div>
        
        <div class="search-container">
            <input type="text" id="searchInput" class="search-input" placeholder="ابحث في جميع السجلات..." oninput="performSearch()">
        </div>
        
        <div class="nav-menu">
            <button class="nav-button" onclick="showSection('accounts')">تكويد الحسابات</button>
            <button class="nav-button" onclick="showSection('journal')">دفتر اليومية</button>
            <button class="nav-button" onclick="showSection('ledger')">دفاتر الأستاذ المساعدة</button>
            <button class="nav-button" onclick="showSection('trial-balance')">ميزان المراجعة</button>
            <button class="nav-button" onclick="showSection('income')">قائمة الدخل</button>
            <button class="nav-button" onclick="showSection('balance')">الميزانية العمومية</button>
            <button class="nav-button" onclick="showSection('payroll')">سجل الأجور والمرتبات</button>
            <button class="nav-button" onclick="showSection('tax')">الشرائح الضريبية</button>
        </div>
    
        <div id="accounts" class="section">
            <h2>تكويد الحسابات</h2>
            <table id="accounts-table">
                <tr>
                    <th>رقم الحساب</th>
                    <th>اسم الحساب</th>
                    <th>نوع الحساب</th>
                    <th>الرصيد الافتتاحي</th>
                </tr>
            </table>
            <button class="add-button" onclick="addAccountRow()">إضافة حساب جديد</button>
        </div>
    
        <div id="journal" class="section">
            <h2>دفتر اليومية</h2>
            <table id="journal-table">
                <tr>
                    <th>التاريخ</th>
                    <th>رقم القيد</th>
                    <th>البيان</th>
                    <th>مدين</th>
                    <th>دائن</th>
                </tr>
            </table>
            <button class="add-button" onclick="addJournalEntry()">إضافة قيد جديد</button>
        </div>
    
        <div id="ledger" class="section">
            <h2>دفاتر الأستاذ المساعدة</h2>
            <table id="ledger-table">
                <tr>
                    <th>التاريخ</th>
                    <th>البيان</th>
                    <th>مدين</th>
                    <th>دائن</th>
                    <th>الرصيد</th>
                </tr>
            </table>
            <button class="add-button" onclick="addLedgerEntry()">إضافة حركة جديدة</button>
        </div>
    
        <div id="trial-balance" class="section">
            <h2>ميزان المراجعة</h2>
            <table id="trial-balance-table">
                <tr>
                    <th>رقم الحساب</th>
                    <th>اسم الحساب</th>
                    <th>مدين</th>
                    <th>دائن</th>
                </tr>
            </table>
            <button class="add-button" onclick="addTrialBalanceEntry()">إضافة بند جديد</button>
        </div>
    
        <div id="income" class="section">
            <h2>قائمة الدخل</h2>
            <table id="income-table">
                <tr>
                    <th>البند</th>
                    <th>المبلغ</th>
                </tr>
            </table>
            <button class="add-button" onclick="addIncomeEntry()">إضافة بند جديد</button>
        </div>
    
        <div id="balance" class="section">
            <h2>الميزانية العمومية</h2>
            <table id="balance-sheet-table">
                <tr>
                    <th>الأصول</th>
                    <th>المبلغ</th>
                    <th>الخصوم وحقوق الملكية</th>
                    <th>المبلغ</th>
                </tr>
            </table>
            <button class="add-button" onclick="addBalanceSheetEntry()">إضافة بند جديد</button>
        </div>
    
        <div id="payroll" class="section">
            <h2>سجل الأجور والمرتبات</h2>
            <table id="payroll-table">
                <tr>
                    <th>اسم الموظف</th>
                    <th>الراتب الأساسي</th>
                    <th>البدلات</th>
                    <th>الخصومات</th>
                    <th>صافي الراتب</th>
                </tr>
            </table>
            <button class="add-button" onclick="addPayrollEntry()">إضافة موظف جديد</button>
        </div>
    
        <div id="tax" class="section">
            <h2>الشرائح الضريبية</h2>
            <table id="tax-table">
                <tr>
                    <th>الشريحة</th>
                    <th>من</th>
                    <th>إلى</th>
                    <th>نسبة الضريبة</th>
                </tr>
            </table>
            <button class="add-button" onclick="addTaxEntry()">إضافة شريحة جديدة</button>
        </div>
    
        <div id="searchResults" class="section search-results">
            <h2>نتائج البحث</h2>
            <table id="search-results-table">
                <tr>
                    <th>القسم</th>
                    <th>التفاصيل</th>
                </tr>
            </table>
        </div>
        
        <button class="logout-button" onclick="logout()">تسجيل خروج</button>
    </div>
    
    <script>
    // حفظ البيانات في Local Storage
    const saveData = () => {
        const tables = [
            'accounts-table',
            'journal-table',
            'ledger-table',
            'trial-balance-table',
            'income-table',
            'balance-sheet-table',
            'payroll-table',
            'tax-table'
        ];
        
        tables.forEach(tableId => {
            const tableContent = document.getElementById(tableId).innerHTML;
            localStorage.setItem(tableId, tableContent);
        });
    };
    
    // استرجاع البيانات من Local Storage
    const loadData = () => {
        const tables = [
            'accounts-table',
            'journal-table',
            'ledger-table',
            'trial-balance-table',
            'income-table',
            'balance-sheet-table',
            'payroll-table',
            'tax-table'
        ];
        
        tables.forEach(tableId => {
            const tableContent = localStorage.getItem(tableId);
            if (tableContent) {
                document.getElementById(tableId).innerHTML = tableContent;
            }
        });
    };
    
    document.querySelector('.container').style.display = 'none';
    
    const users = JSON.parse(localStorage.getItem('users') || '[]');
    
    function showRegisterForm() {
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('registerForm').style.display = 'flex';
    }
    
    function showLoginForm() {
        document.getElementById('loginForm').style.display = 'flex';
        document.getElementById('registerForm').style.display = 'none';
    }
    
    function register() {
        const username = document.getElementById('regUsername').value;
        const password = document.getElementById('regPassword').value;
        
        // Add validation
        if (username.length < 3) {
            alert('اسم المستخدم يجب أن يكون 3 أحرف على الأقل');
            return;
        }
        if (password.length < 6) {
            alert('كلمة المرور يجب أن تكون 6 أحرف على الأقل'); 
            return;
        }
        
        // Check if username already exists
        if (users.find(u => u.username === username)) {
            alert('اسم المستخدم موجود بالفعل');
            return;
        }
        
        const permissions = {
            accounts: document.getElementById('perm_accounts').checked,
            journal: document.getElementById('perm_journal').checked,
            ledger: document.getElementById('perm_ledger').checked,
            trial: document.getElementById('perm_trial').checked,
            income: document.getElementById('perm_income').checked,
            balance: document.getElementById('perm_balance').checked,
            payroll: document.getElementById('perm_payroll').checked,
            tax: document.getElementById('perm_tax').checked
        };
        
        users.push({ username, password, permissions });
        localStorage.setItem('users', JSON.stringify(users));
        
        alert('تم التسجيل بنجاح');
        showLoginForm();
    }
    
    function login() {
        const username = document.getElementById('loginUsername').value;
        const password = document.getElementById('loginPassword').value;
        
        const user = users.find(u => u.username === username && u.password === password);
        
        if (user) {
            document.getElementById('authSection').style.display = 'none';
            document.querySelector('.container').style.display = 'block';
            
            // Apply permissions
            Object.entries(user.permissions).forEach(([key, hasPermission]) => {
                const button = document.querySelector(`[onclick="showSection('${key}')"]`);
                if (button && !hasPermission) {
                    button.style.display = 'none';
                }
            });
            
            sessionStorage.setItem('currentUser', username);
        } else {
            document.getElementById('loginError').style.display = 'block';
        }
    }
    
    // Add to DOMContentLoaded event
    document.addEventListener('DOMContentLoaded', () => {
        if (sessionStorage.getItem('currentUser')) {
            document.getElementById('authSection').style.display = 'none';
            document.querySelector('.container').style.display = 'block';
        } else {
            document.getElementById('authSection').style.display = 'block';
            document.querySelector('.container').style.display = 'none';
        }
        
        showSection('accounts');
        loadData();
    
        // Add error handling for images
        const images = document.querySelectorAll('img');
        images.forEach(img => {
            img.onerror = function() {
                console.error('Image failed to load:', img.src);
                this.style.display = 'none';
            };
        });
    });
    
    function showSection(sectionId) {
        document.querySelectorAll('.section').forEach(section => {
            section.classList.remove('active');
        });
        document.getElementById(sectionId).classList.add('active');
    }
    
    function addAccountRow() {
        const table = document.getElementById('accounts-table');
        const newRow = table.insertRow(-1);
        
        const cells = [
            'رقم الحساب',
            'اسم الحساب',
            'نوع الحساب',
            'الرصيد الافتتاحي'
        ];
    
        cells.forEach(cellText => {
            const cell = newRow.insertCell(-1);
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = cellText;
            input.onchange = saveData;
            cell.appendChild(input);
        });
    }
    
    function addJournalEntry() {
        const table = document.getElementById('journal-table');
        const newRow = table.insertRow(-1);
        
        const cells = [
            'التاريخ',
            'رقم القيد',
            'البيان',
            'مدين',
            'دائن'
        ];
    
        cells.forEach(cellText => {
            const cell = newRow.insertCell(-1);
            const input = document.createElement('input');
            input.type = cellText === 'التاريخ' ? 'date' : 'text';
            input.placeholder = cellText;
            input.onchange = saveData;
            cell.appendChild(input);
        });
    }
    
    function addLedgerEntry() {
        const table = document.getElementById('ledger-table');
        const newRow = table.insertRow(-1);
        
        ['التاريخ', 'البيان', 'مدين', 'دائن', 'الرصيد'].forEach((cellText, index) => {
            const cell = newRow.insertCell(-1);
            const input = document.createElement('input');
            input.type = cellText === 'التاريخ' ? 'date' : 'text';
            input.placeholder = cellText;
            input.onchange = saveData;
            cell.appendChild(input);
        });
    }
    
    function addTrialBalanceEntry() {
        const table = document.getElementById('trial-balance-table');
        const newRow = table.insertRow(-1);
        
        ['رقم الحساب', 'اسم الحساب', 'مدين', 'دائن'].forEach(cellText => {
            const cell = newRow.insertCell(-1);
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = cellText;
            input.onchange = saveData;
            cell.appendChild(input);
        });
    }
    
    function addIncomeEntry() {
        const table = document.getElementById('income-table');
        const newRow = table.insertRow(-1);
        
        ['البند', 'المبلغ'].forEach(cellText => {
            const cell = newRow.insertCell(-1);
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = cellText;
            input.onchange = saveData;
            cell.appendChild(input);
        });
    }
    
    function addBalanceSheetEntry() {
        const table = document.getElementById('balance-sheet-table');
        const newRow = table.insertRow(-1);
        
        ['الأصول', 'المبلغ', 'الخصوم وحقوق الملكية', 'المبلغ'].forEach(cellText => {
            const cell = newRow.insertCell(-1);
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = cellText;
            input.onchange = saveData;
            cell.appendChild(input);
        });
    }
    
    function addPayrollEntry() {
        const table = document.getElementById('payroll-table');
        const newRow = table.insertRow(-1);
        
        ['اسم الموظف', 'الراتب الأساسي', 'البدلات', 'الخصومات', 'صافي الراتب'].forEach(cellText => {
            const cell = newRow.insertCell(-1);
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = cellText;
            input.onchange = saveData;
            cell.appendChild(input);
        });
    }
    
    function addTaxEntry() {
        const table = document.getElementById('tax-table');
        const newRow = table.insertRow(-1);
        
        ['الشريحة', 'من', 'إلى', 'نسبة الضريبة'].forEach(cellText => {
            const cell = newRow.insertCell(-1);
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = cellText;
            input.onchange = saveData;
            cell.appendChild(input);
        });
    }
    
    function performSearch() {
        const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
        const resultsTable = document.getElementById('search-results-table');
        const resultsSection = document.getElementById('searchResults');
        
        // Clear previous results except header row
        while (resultsTable.rows.length > 1) {
            resultsTable.deleteRow(1);
        }
    
        if (searchTerm.length > 0) {
            resultsSection.classList.add('active');
        } else {
            resultsSection.classList.remove('active');
            return;
        }
    
        const tables = {
            'accounts-table': ['تكويد الحسابات', ['رقم الحساب', 'اسم الحساب', 'نوع الحساب', 'الرصيد الافتتاحي']],
            'journal-table': ['دفتر اليومية', ['التاريخ', 'رقم القيد', 'البيان', 'مدين', 'دائن']],
            'ledger-table': ['دفاتر الأستاذ', ['التاريخ', 'البيان', 'مدين', 'دائن', 'الرصيد']],
            'trial-balance-table': ['ميزان المراجعة', ['رقم الحساب', 'اسم الحساب', 'مدين', 'دائن']],
            'income-table': ['قائمة الدخل', ['البند', 'المبلغ']],
            'balance-sheet-table': ['الميزانية العمومية', ['الأصول', 'المبلغ', 'الخصوم وحقوق الملكية', 'المبلغ']],
            'payroll-table': ['سجل الأجور', ['اسم الموظف', 'الراتب الأساسي', 'البدلات', 'الخصومات', 'صافي الراتب']],
            'tax-table': ['الشرائح الضريبية', ['الشريحة', 'من', 'إلى', 'نسبة الضريبة']]
        };
    
        let foundResults = false;
    
        // Search through each table
        Object.entries(tables).forEach(([tableId, [sectionName, headers]]) => {
            const table = document.getElementById(tableId);
            for (let i = 1; i < table.rows.length; i++) {
                const row = table.rows[i];
                let rowText = '';
                const inputs = Array.from(row.getElementsByTagName('input'));
                
                inputs.forEach(input => {
                    rowText += input.value + ' ';
                });
                
                if (rowText.toLowerCase().includes(searchTerm)) {
                    foundResults = true;
                    const newRow = resultsTable.insertRow(-1);
                    
                    // Add section name
                    const sectionCell = newRow.insertCell(0);
                    sectionCell.textContent = sectionName;
                    sectionCell.style.fontWeight = 'bold';
                    
                    // Add editable fields
                    const detailsCell = newRow.insertCell(1);
                    const detailsTable = document.createElement('table');
                    detailsTable.className = 'search-details-table';
                    
                    // Create header row
                    const headerRow = detailsTable.insertRow();
                    headers.forEach(header => {
                        const th = document.createElement('th');
                        th.textContent = header;
                        headerRow.appendChild(th);
                    });
                    
                    // Create editable data row
                    const dataRow = detailsTable.insertRow();
                    inputs.forEach((input, index) => {
                        const td = dataRow.insertCell();
                        const newInput = document.createElement('input');
                        newInput.type = input.type;
                        newInput.value = input.value;
                        newInput.className = 'search-result-input';
                        newInput.dataset.sourceTable = tableId;
                        newInput.dataset.sourceRow = i;
                        newInput.dataset.sourceIndex = index;
                        newInput.onchange = function() {
                            // Update original table when search result is edited
                            const sourceInput = table.rows[this.dataset.sourceRow].getElementsByTagName('input')[this.dataset.sourceIndex];
                            sourceInput.value = this.value;
                            saveData();
                        };
                        td.appendChild(newInput);
                    });
                    
                    detailsCell.appendChild(detailsTable);
                }
            }
        });
    
        if (!foundResults) {
            const newRow = resultsTable.insertRow(-1);
            const cell = newRow.insertCell(0);
            cell.colSpan = 2;
            cell.textContent = "لا توجد نتائج";
        }
    }
    
    function logout() {
        sessionStorage.removeItem('currentUser');
        document.getElementById('authSection').style.display = 'block';
        document.querySelector('.container').style.display = 'none';
        document.getElementById('loginUsername').value = '';
        document.getElementById('loginPassword').value = '';
    }
    </script>
    
    </body></html>